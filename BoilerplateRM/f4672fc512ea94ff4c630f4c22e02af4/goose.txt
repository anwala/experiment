Then he switched to Turkish and shouted: “Don’t forget Aleppo, don’t forget Syria! Step back! Step back! Only death can take me from here.”

Hasim Kilic, a Turkish photographer for the Hurriyet news organization who witnessed the attack and sold his images to Reuters, said in a telephone interview that the gunman had fired seven shots at the ambassador — “four from behind, three while the body was on the ground” — as guests screamed and scrambled to hide.

Mr. Kilic, who was crouched behind a cocktail table about 12 feet away, said the gunman had ordered everyone else out and refused a security guard’s request to drop his weapon. “Call the police, and I will die here,” Mr. Kilic quoted the assailant as saying.

Turkish officials said the gunman was killed after a shootout with Turkish Special Forces.

He was identified by Turkey’s interior minister as Mevlut Mert Altintas, from the western province of Aydin and a graduate of a police college in Izmir. Local news reports said that Mr. Altintas’s mother and sister had been arrested and that a computer had been confiscated from their house.

While it was too early to tell if the gunman acted alone, his use of jihadist slogans and his invocation of Syria raised the possibility that he was a member, or at least a sympathizer, of an Islamist group like Al Qaeda’s Syria affiliate or the Islamic State, two organizations that Turkey has been accused by allies, including the United States, of supporting in the past.

Russia’s Foreign Ministry spokeswoman, Maria Zakharova, told the Rossiya 24 news channel that Mr. Karlov had died of his wounds in what she described as a terrorist attack. Turkey’s Interior Ministry said the ambassador had died at Guven Hospital in Ankara.

Russian news agencies said the ambassador’s wife fainted and was hospitalized after learning of her husband’s death. They also said that as a precaution, Russian tourists in Turkey had been advised against leaving their hotel rooms or visiting public places.

Russia’s Tass news agency said that Mr. Karlov had been shot from behind while finishing remarks at the opening of an art exhibition titled “Russia Through Turks’ Eyes.”

Mr. Karlov, who started his career as a diplomat in 1976, worked extensively in North Korea over two decades, before changing regions in 2007, according to a biography on the Russian Embassy’s website. He became ambassador in July 2013.

The attack was a rare instance of an assassination of a Russian envoy. Historians said it might have been the first since Pyotr Voykov, a Soviet ambassador to Poland, was shot to death in Warsaw in 1927.

For many Russians, the assassination is likely to recall the 19th-century killing in Tehran of Aleksandr Griboyedov, a poet and diplomat who died after a mob stormed the Russian Embassy. That episode is remembered as the most severe insult to Russia’s diplomatic corps in the country’s history.

More recently, the Lebanese Shiite militia Hezbollah, now allied with Russia in Syria, kidnapped four Soviet diplomats in 1985, killing one and releasing three a month later.
